All the data sets provided underwent preprocessing as described in the manuscript SI sections 2,3 and 4.

#Multi Subject Analysis

Two multi subject data sets were used. 
The file titled 'Carmody_diet_multi_subject' is diet oscillation data from [1] 
The file titled 'Ng_Antibiotics_multi_subject' The other is antibiotics response data from [2]

#Single subject Analysis
We did single subject treatment to produce figure 1b. The data sets used are 3 human data sets and 2 mice data sets. capm3 and capf4 are from [4], davA and davB are from [4] and humD-F are from [5].
The mice data sets used are carm_oscXX, carm_hfXX and carm_lfXX from [1] and ng_abxXX from [2].


[1] Carmody, R. N. et al. Diet Dominates Host Genotype in Shaping the Murine Gut Microbiota. Cell Host Microbe 17, 72–84 (2015).
[2] Ng, K. M. et al. Recovery of the Gut Microbiota after Antibiotics Depends on Host Diet, Community Context, and Environmental Reservoirs. Cell Host Microbe 26, 650-665.e4 (2019).
[3] Caporaso, J. G. et al. Moving pictures of the human microbiome. Genome Biol. 12, R50 (2011).
[4] David, L. A. et al. Host lifestyle affects human microbiota on daily timescales. Genome Biol. 15, R89 (2014).
[5] Dethlefsen, L. & Relman, D. A. Incomplete recovery and individualized responses of the human distal gut microbiota to repeated antibiotic perturbation. Proc. Natl. Acad. Sci. 108, 4554–4561 (2011).
